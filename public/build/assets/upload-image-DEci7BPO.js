import{r as t,v as x,j as e}from"./app-CaMb1ExZ.js";import{F as g}from"./form-control-BahN58so.js";import{B as S}from"./button-DvU_7TCz.js";import{I as v}from"./input-DSRel0Ss.js";import{S as b,a as U,b as C,c as L,d as O,e as w}from"./sheet-Dbr0NSqt.js";import{t as p}from"./index-Dq4UQXSB.js";import{L as E}from"./loader-circle-BdOHvcfF.js";import{U as R}from"./upload-D2IvETAP.js";/* empty css            */import"./label-Hs9YqQIb.js";import"./index-qQf3rtOZ.js";import"./index-C-p7j8Dy.js";import"./utils-XBr-Hfdz.js";import"./index-CeYM9TJz.js";import"./index-D6G0nd-0.js";import"./index-rXQ-LEzA.js";import"./index-BWQGf4cv.js";import"./x-D_CA5GnP.js";const Q=({children:c})=>{const[n,a]=t.useState(!1),{data:o,setData:m,processing:i,post:d,reset:f}=x({file:[]}),[h,l]=t.useState([]);t.useEffect(()=>{const s=o.file.map(r=>URL.createObjectURL(r));return l(s),()=>{s.forEach(r=>URL.revokeObjectURL(r))}},[o.file]);const u=s=>{const r=Array.from(s.target.files??[]);m("file",r)},j=()=>{d(route("media.store"),{preserveScroll:!0,onSuccess:()=>{p.success("Upload berhasil"),f(),l([]),a(!1)},onError:s=>p.error(Object.values(s).flat().join(", "))})};return e.jsxs(b,{open:n,onOpenChange:a,children:[e.jsx(U,{asChild:!0,children:c}),e.jsxs(C,{children:[e.jsx(L,{children:e.jsx(O,{children:"Upload Gambar"})}),e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsx(g,{label:"Pilih file",children:e.jsx(v,{type:"file",accept:"image/*",multiple:!0,onChange:u})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:h.map((s,r)=>e.jsx("img",{src:s,alt:`preview-${r}`,className:"aspect-square w-full rounded object-cover shadow"},r))})]}),e.jsx(w,{children:e.jsxs(S,{onClick:j,disabled:i,children:[i?e.jsx(E,{className:"animate-spin"}):e.jsx(R,{}),"Upload"]})})]})]})};export{Q as default};
