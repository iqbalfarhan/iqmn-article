import{r as t,v as x,j as e}from"./app-C5gzVYrn.js";import{F as g}from"./form-control-BJhC343i.js";import{B as S}from"./button-D4EXK_-y.js";import{I as v}from"./input-DHiJwYni.js";import{S as b,a as U,b as C,c as L,d as O,e as w}from"./sheet-DsGcJi4y.js";import{t as p}from"./index-B7aruxik.js";import{L as E}from"./loader-circle-4uee1wy6.js";import{U as R}from"./upload-CXyJxUHa.js";/* empty css            */import"./label-tanoIZHQ.js";import"./index-DH6BozNo.js";import"./index-uoBVUIe1.js";import"./utils-XBr-Hfdz.js";import"./index-D8pbJs2Z.js";import"./index-bASSt1jM.js";import"./index-Tn7-M47G.js";import"./index-C___4UA2.js";import"./x-DV9ku6Eh.js";const Q=({children:c})=>{const[n,a]=t.useState(!1),{data:o,setData:m,processing:i,post:d,reset:f}=x({file:[]}),[h,l]=t.useState([]);t.useEffect(()=>{const s=o.file.map(r=>URL.createObjectURL(r));return l(s),()=>{s.forEach(r=>URL.revokeObjectURL(r))}},[o.file]);const u=s=>{const r=Array.from(s.target.files??[]);m("file",r)},j=()=>{d(route("media.store"),{preserveScroll:!0,onSuccess:()=>{p.success("Upload berhasil"),f(),l([]),a(!1)},onError:s=>p.error(Object.values(s).flat().join(", "))})};return e.jsxs(b,{open:n,onOpenChange:a,children:[e.jsx(U,{asChild:!0,children:c}),e.jsxs(C,{children:[e.jsx(L,{children:e.jsx(O,{children:"Upload Gambar"})}),e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsx(g,{label:"Pilih file",children:e.jsx(v,{type:"file",accept:"image/*",multiple:!0,onChange:u})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:h.map((s,r)=>e.jsx("img",{src:s,alt:`preview-${r}`,className:"aspect-square w-full rounded object-cover shadow"},r))})]}),e.jsx(w,{children:e.jsxs(S,{onClick:j,disabled:i,children:[i?e.jsx(E,{className:"animate-spin"}):e.jsx(R,{}),"Upload"]})})]})]})};export{Q as default};
